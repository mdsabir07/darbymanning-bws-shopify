<div class="{% unless product.available %}sold-out{% endunless %} block  border block--shadow block--slide">
    <a href="{{ product.url | within: collection }}">
        <p class="block__message  block__message--blue">{{product.type}}</p>
        {% assign style = 'cover' %}
        {%- if product.metafields.carousel.orientation -%}
        	{% assign style = product.metafields.carousel.orientation %}
        {%- endif -%}
        <div class="block__img {% if shrink %}block__img--shrink{% endif %} block__img--{{ style }} {% if product.metafields.carousel.top %}block__img--top{% endif %}" data-image-loading-animation>
            <div class="block__wrap">
                {%- assign preview_image = product.featured_media.preview_image -%}
                {%- assign img_url = preview_image | img_url: '1x1' | replace: '_1x1.', '_{width}x.' -%}
                {%- if product.metafields.carousel.image -%}
                	{% assign img_url = product.metafields.carousel.image %}
                {%- endif -%}
                <img
                class="lazyload lazypreload"
                data-src="{{ img_url }}"
                data-sizes="auto"
                alt="{{ preview_image.alt | escape }}" >                
            </div>
        </div>
        <article class="block__info block__info--flexed block__info--160 {%if show_vendor %}block__info--190{% endif %}">
            <div>
                {% if show_vendor %}
                    <h4 class="block__title block__title--small">{{ product.vendor }}</h4>
                {% endif %}
                {% assign lcase = product.vendor | downcase %}
                <p class="block__p">{{ product.title | replace: product.vendor, "" | replace: lcase, "" }}</p>
            </div>
            <div class="price__wrapper">
                {% include 'product-price-listing', product: product %}
            </div>
        </article>
    </a>
</div>
